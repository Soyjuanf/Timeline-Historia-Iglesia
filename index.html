<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Historia de la Iglesia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Montserrat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --olive: #6b705c;
      --olive-dark: #4a4f3c;
      --terracotta: #b5654d;
      --terracotta-light: #d4a59a;
      --bg: #f8f4f1;
      --text: #2b2b2b;
      --white: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    header {
      position: fixed;
      top: 0; left: 0; right: 0; height: 80px;
      background: var(--olive);
      color: var(--white);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 24px;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    header span {
      font-size: 12px;
      opacity: 0.8;
    }

    main {
      position: absolute;
      inset: 80px 0 0 0;
      display: grid;
      grid-template-columns: 3fr 1fr;
    }

    .timeline-wrapper {
      overflow-x: auto;
      display: flex;
      scroll-snap-type: x mandatory;
      background: #efe9e4;
    }

    .era {
      min-width: 180vw; /* aire horizontal por era */
      scroll-snap-align: start;
      padding: 32px;
      border-right: 1px solid rgba(0,0,0,0.1);
    }

    .era h2 {
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--terracotta);
      margin-bottom: 4px;
    }

    .era-subtitle {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--olive-dark);
      opacity: 0.8;
    }

    /* Una sola línea por era */
    .layers {
      display: grid;
      grid-template-rows: 1fr;
      position: relative;
      height: 360px;
      margin-top: 48px;
    }

    .layer {
      position: relative;
      border-top: 1px dashed rgba(0,0,0,0.2);
      padding-left: 260px;
      padding-right: 260px;
    }

    .layer span {
      position: absolute;
      top: -10px;
      left: 260px;
      background: var(--bg);
      padding: 2px 10px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--olive-dark);
    }

    .event {
      position: absolute;
      transform: translate(-50%, -50%);
      background: var(--white);
      border: 2px solid var(--terracotta);
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 11px;
      cursor: pointer;
      white-space: nowrap;
      transition: transform 0.25s, box-shadow 0.25s, border-color 0.25s;
    }

    .event:hover {
      transform: translate(-50%, -50%) scale(1.08);
      box-shadow: 0 10px 24px rgba(0,0,0,0.25);
      border-color: var(--olive-dark);
    }

    /* Movimientos de larga duración (bandas) */
    .event--movement {
      transform: translateY(-50%);
      border-radius: 24px;
      background: rgba(181, 101, 77, 0.14);
      border-style: dashed;
    }

    /* Escala de años */
    .year-scale {
      position: absolute;
      left: 260px;
      right: 260px;
      bottom: -28px;
      height: 18px;
    }

    .year-scale::before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      top: 3px;
      height: 1px;
      background: rgba(0,0,0,0.18);
    }

    .year-tick {
      position: absolute;
      font-size: 9px;
      transform: translateX(-50%);
      color: var(--olive-dark);
      opacity: 0.8;
    }

    .year-tick::before {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: -6px;
      width: 1px;
      height: 6px;
      background: rgba(0,0,0,0.28);
    }

    aside {
      background: var(--white);
      padding: 24px;
      border-left: 1px solid rgba(0,0,0,0.1);
      overflow-y: auto;
    }

    aside h3 {
      margin-top: 0;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 14px;
      color: var(--olive);
    }

    .detail-card h4 {
      margin-top: 12px;
      margin-bottom: 8px;
      font-weight: 800;
      color: var(--terracotta);
    }

    .detail-card p {
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .detail-card .tag {
      display: inline-block;
      font-size: 10px;
      border: 1px solid var(--olive);
      padding: 4px 8px;
      border-radius: 999px;
      margin-right: 6px;
      margin-bottom: 6px;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }

      aside {
        height: 35vh;
      }

      .timeline-wrapper {
        height: calc(100vh - 80px - 35vh);
      }
    }
  </style>
</head>

<body>

<header>
  <h1>HISTORIA DE LA IGLESIA</h1>
  <span>Línea de tiempo interactiva</span>
</header>

<main>
  <div class="timeline-wrapper">

    <!-- ÉFESO: 0–200 -->
    <section class="era"
             data-start="0" data-end="200"
             data-scale-start="0" data-scale-end="200">
      <h2>ÉFESO</h2>
      <div class="era-subtitle">Apocalipsis 2:1–7 · Iglesia primitiva</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- ESMIRNA: 200–300 -->
    <section class="era"
             data-start="200" data-end="300"
             data-scale-start="200" data-scale-end="300">
      <h2>ESMIRNA</h2>
      <div class="era-subtitle">Apocalipsis 2:8–11 · Iglesia perseguida</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- PÉRGAMO: 300–400 -->
    <section class="era"
             data-start="300" data-end="400"
             data-scale-start="300" data-scale-end="400">
      <h2>PÉRGAMO</h2>
      <div class="era-subtitle">Apocalipsis 2:12–17 · Iglesia unida al Estado</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- TIATIRA: 400–1000 -->
    <section class="era"
             data-start="400" data-end="1000"
             data-scale-start="400" data-scale-end="1000">
      <h2>TIATIRA</h2>
      <div class="era-subtitle">Apocalipsis 2:18–29 · Edad media religiosa</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- SARDIS: 1100–1400 -->
    <section class="era"
             data-start="1100" data-end="1400"
             data-scale-start="1100" data-scale-end="1400">
      <h2>SARDIS</h2>
      <div class="era-subtitle">Apocalipsis 3:1–6 · Iglesia nominal</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- FILADELFIA: 1500–1800 -->
    <section class="era"
             data-start="1500" data-end="1800"
             data-scale-start="1500" data-scale-end="1800">
      <h2>FILADELFIA</h2>
      <div class="era-subtitle">Apocalipsis 3:7–13 · Iglesia misionera</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

    <!-- LAODICEA: 1900–2025 -->
    <section class="era"
             data-start="1900" data-end="2025"
             data-scale-start="1900" data-scale-end="2025">
      <h2>LAODICEA</h2>
      <div class="era-subtitle">Apocalipsis 3:14–22 · Iglesia de los últimos días</div>

      <div class="layers">
        <div class="layer" data-layer="linea">
          <span>Línea de tiempo</span>
        </div>
      </div>
    </section>

  </div>

  <aside>
    <h3>DETALLE</h3>
    <div id="detailPanel">
      Haz clic en un evento para ver su información.
    </div>
  </aside>
</main>

<script>
  const events = [
    // === ÉFESO (0–200) ===
    { eraIndex: 0, type: "point", year: 29,  title: "Ministerio público de Jesús",          description: "Jesús inicia su predicación del Reino de Dios y llama a sus discípulos.", tags: ["Evangelios"] },
    { eraIndex: 0, type: "point", year: 30,  title: "Crucifixión y resurrección de Jesús",  description: "Jesús muere bajo Poncio Pilato y resucita al tercer día.",               tags: ["Redención"] },
    { eraIndex: 0, type: "point", year: 43,  title: "Roma invade Bretaña",                  description: "El Imperio romano inicia la conquista de Bretaña.",                     tags: ["Imperio romano"] },
    { eraIndex: 0, type: "point", year: 45,  title: "Se les llama cristianos en Antioquía", description: "Los discípulos reciben por primera vez el nombre de cristianos.",        tags: ["Identidad cristiana"] },
    { eraIndex: 0, type: "point", year: 50,  title: "Viajes misioneros de Pablo",           description: "Pablo difunde el evangelio por Asia Menor y Europa.",                   tags: ["Misión"] },
    { eraIndex: 0, type: "point", year: 64,  title: "Persecución de Nerón",                 description: "Primera persecución imperial contra los cristianos.",                   tags: ["Persecución"] },
    { eraIndex: 0, type: "point", year: 66,  title: "Primera guerra judío-romana",          description: "Rebelión de los judíos contra Roma.",                                   tags: ["Historia"] },
    { eraIndex: 0, type: "point", year: 67,  title: "Martirio del apóstol Pedro",           description: "Pedro muere por su fe en Roma.",                                        tags: ["Martirio"] },
    { eraIndex: 0, type: "point", year: 70,  title: "Destrucción de Jerusalén",             description: "Las legiones romanas destruyen Jerusalén y el Templo.",                 tags: ["Profecía cumplida"] },
    { eraIndex: 0, type: "point", year: 73,  title: "Caída de Masada",                      description: "Último bastión judío frente a Roma.",                                   tags: ["Historia judía"] },
    { eraIndex: 0, type: "point", year: 79,  title: "Erupción del Vesubio",                 description: "Pompeya y Herculano son destruidas por la erupción del Vesubio.",       tags: ["Catástrofe"] },
    { eraIndex: 0, type: "point", year: 80,  title: "Josefo escribe 'La guerra de los judíos'", description: "Flavio Josefo relata el conflicto judeo-romano.",                tags: ["Historia"] },
    { eraIndex: 0, type: "point", year: 90,  title: "Persecución de Domiciano",             description: "Cristianos perseguidos por negarse a adorar al emperador.",             tags: ["Persecución"] },
    { eraIndex: 0, type: "point", year: 100, title: "Martirio de Clemente de Roma",         description: "Uno de los primeros obispos de Roma es ejecutado.",                     tags: ["Martirio"] },
    { eraIndex: 0, type: "point", year: 155, title: "Justino Mártir confronta a Marción",   description: "Justino defiende la fe apostólica frente a la herejía de Marción.",     tags: ["Apologética"] },
    { eraIndex: 0, type: "point", year: 170, title: "Marco Aurelio y los cristianos",       description: "Durante su reinado se intensifican martirios locales.",                 tags: ["Persecución"] },
    { eraIndex: 0, type: "point", year: 200, title: "Apología de Tertuliano",              description: "Tertuliano escribe en defensa del cristianismo.",                       tags: ["Apologética"] },

    // === ESMIRNA (200–300) ===
    {
      eraIndex: 1,
      type: "movement",
      startYear: 156,
      endYear: 300,
      title: "Montanistas",
      description: "Movimiento profético surgido en Frigia que enfatizaba visiones, revelaciones y vida ascética.",
      tags: ["Movimiento", "Profecía"]
    },
    {
      eraIndex: 1,
      type: "movement",
      startYear: 251,
      endYear: 300,
      title: "Novacianos",
      description: "Movimiento rigorista que rechazaba la readmisión de cristianos que habían apostatado.",
      tags: ["Movimiento", "Rigorismo"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 250,
      title: "Persecución de Decio",
      description: "Primera persecución imperial obligatoria contra todos los cristianos.",
      tags: ["Persecución"]
    },

    // === PÉRGAMO (300–400) ===
    {
      eraIndex: 2,
      type: "movement",
      startYear: 311,
      endYear: 400,
      title: "Donatistas",
      description: "Movimiento en el norte de África que exigía ministros moralmente puros.",
      tags: ["Movimiento", "África"]
    },
    {
      eraIndex: 2,
      type: "movement",
      startYear: 380,
      endYear: 600,
      title: "Nestorianos",
      description: "Corriente cristológica con raíces a finales del siglo IV, condenada en el Concilio de Éfeso (431) y extendida hacia Persia y Asia.",
      tags: ["Movimiento", "Cristología"]
    },
    { eraIndex: 2, type: "point", year: 303, title: "Gran persecución de Diocleciano", description: "Última y más violenta persecución oficial contra la Iglesia.",                 tags: ["Persecución"] },
    { eraIndex: 2, type: "point", year: 311, title: "Historia Eclesiástica de Eusebio", description: "Eusebio de Cesarea escribe la primera gran historia oficial de la Iglesia.",   tags: ["Historia de la Iglesia"] },
    { eraIndex: 2, type: "point", year: 312, title: "Constantino gana la batalla del Puente Milvio", description: "Constantino vence a Majencio bajo el signo cristiano.", tags: ["Constantino", "Imperio"] },
    { eraIndex: 2, type: "point", year: 313, title: "Edicto de Milán",                  description: "Se decreta la libertad religiosa para los cristianos.",                       tags: ["Iglesia y Estado"] },
    { eraIndex: 2, type: "point", year: 325, title: "Concilio de Nicea",                description: "Primer concilio ecuménico; se afirma la divinidad de Cristo.",               tags: ["Concilios", "Cristología"] },
    { eraIndex: 2, type: "point", year: 340, title: "Cristianismo llega a Abisinia",    description: "El cristianismo se establece en el reino de Abisinia (Etiopía).",            tags: ["Misión", "África"] },
    { eraIndex: 2, type: "point", year: 361, title: "Juliano el Apóstata",             description: "Emperador que intenta restaurar el paganismo.",                               tags: ["Imperio", "Paganismo"] },
    { eraIndex: 2, type: "point", year: 370, title: "Basilio contra el arrianismo",     description: "Basilio de Cesarea defiende la doctrina trinitaria.",                        tags: ["Padres de la Iglesia"] },
    { eraIndex: 2, type: "point", year: 380, title: "Cristianismo religión oficial del Imperio", description: "El edicto de Tesalónica declara al cristianismo niceno religión oficial.", tags: ["Iglesia y Estado"] },
    { eraIndex: 2, type: "point", year: 395, title: "División definitiva del Imperio romano", description: "A la muerte de Teodosio I, el Imperio se divide en Oriente y Occidente.", tags: ["Imperio romano"] },

    // === TIATIRA (400–1000) — por ahora sólo los que ya teníamos en ese rango ===
    { eraIndex: 3, type: "point", year: 396, title: "Agustín, obispo de Hipona",        description: "Agustín es ordenado obispo; su obra marcará la teología occidental.",          tags: ["Teología"] },
    { eraIndex: 3, type: "point", year: 405, title: "Jerónimo termina la Vulgata",      description: "Se completa la traducción latina de la Biblia.",                              tags: ["Biblia"] },
    { eraIndex: 3, type: "point", year: 431, title: "Se establece el culto a María",    description: "El Concilio de Éfeso proclama a María como Theotokos.",                      tags: ["Mariología"] },
    { eraIndex: 3, type: "point", year: 436, title: "Tropas romanas abandonan Britania",description: "Roma retira sus tropas de Britania.",                                       tags: ["Fin del Imperio"] },
    { eraIndex: 3, type: "point", year: 443, title: "Tribus germánicas en Alsacia",     description: "Pueblos germánicos se asientan en territorio romano.",                       tags: ["Invasiones bárbaras"] },
    { eraIndex: 3, type: "point", year: 450, title: "León I: Iglesia y Estado se unen", description: "León I articula la autoridad papal sobre Occidente.",                        tags: ["Papado", "Iglesia y Estado"] },
    { eraIndex: 3, type: "point", year: 452, title: "Atila el Huno invade Italia",      description: "Atila amenaza Roma; León I negocia y detiene su avance.",                    tags: ["Invasiones bárbaras"] },
    { eraIndex: 3, type: "point", year: 455, title: "Los vándalos saquean Roma",        description: "La ciudad de Roma es saqueada por los vándalos.",                           tags: ["Invasiones bárbaras"] },
    { eraIndex: 3, type: "point", year: 470, title: "Florece la civilización maya",     description: "Apogeo de la civilización maya clásica en Mesoamérica.",                     tags: ["Culturas antiguas"] },
    { eraIndex: 3, type: "point", year: 476, title: "Último emperador romano de Occidente", description: "Rómulo Augústulo es depuesto; cae el Imperio romano de Occidente.",   tags: ["Caída de Roma"] },
    { eraIndex: 3, type: "point", year: 478, title: "Primer templo sintoísta en Japón", description: "Se consolida el sintoísmo con templos dedicados.",                          tags: ["Religiones del mundo"] }

    // Por ahora SARDIS, FILADELFIA y LAODICEA quedan sin eventos,
    // los iremos llenando cuando me pases su contenido.
  ];

  const eras = document.querySelectorAll(".era");
  const detailPanel = document.getElementById("detailPanel");

  const pointOffsetsY = [-40, 0, 40, 80];
  const movementOffsetsY = [-40, 0, 40];

  /* 1) Escala de años, usando data-scale-start / data-scale-end */
  eras.forEach(eraEl => {
    const layer = eraEl.querySelector('.layer[data-layer="linea"]');
    if (!layer) return;

    const scale = document.createElement('div');
    scale.className = 'year-scale';
    layer.appendChild(scale);

    const scaleStart = eraEl.dataset.scaleStart
      ? parseInt(eraEl.dataset.scaleStart, 10)
      : parseInt(eraEl.dataset.start, 10);

    const scaleEnd = eraEl.dataset.scaleEnd
      ? parseInt(eraEl.dataset.scaleEnd, 10)
      : parseInt(eraEl.dataset.end, 10);

    const scaleRange = scaleEnd - scaleStart;
    const firstTick = Math.ceil(scaleStart / 50) * 50;

    for (let year = firstTick; year <= scaleEnd; year += 50) {
      const tick = document.createElement('div');
      tick.className = 'year-tick';
      const percent = ((year - scaleStart) / scaleRange) * 100;
      tick.style.left = percent + '%';
      tick.textContent = year;
      scale.appendChild(tick);
    }
  });

  /* 2) Colocar eventos y movimientos */
  const eventsByEra = [];
  events.forEach(ev => {
    if (!eventsByEra[ev.eraIndex]) eventsByEra[ev.eraIndex] = [];
    eventsByEra[ev.eraIndex].push(ev);
  });

  eventsByEra.forEach((eraEvents, eraIndex) => {
    if (!eraEvents) return;
    const eraEl = eras[eraIndex];
    if (!eraEl) return;

    const start = parseInt(eraEl.dataset.start, 10);
    const end = parseInt(eraEl.dataset.end, 10);
    const range = end - start;

    // ordenar cronológicamente dentro de la era
    eraEvents.sort((a, b) => {
      const aYear = a.type === "movement" ? a.startYear : a.year;
      const bYear = b.type === "movement" ? b.startYear : b.year;
      return aYear - bYear;
    });

    let localPointIdx = 0;
    let localMovIdx = 0;

    eraEvents.forEach(ev => {
      const layer = eraEl.querySelector('.layer[data-layer="linea"]');
      if (!layer) return;

      let leftPercent;
      let widthPercent = null;

      if (ev.type === "movement") {
        const effectiveStart = Math.max(ev.startYear, start);
        const effectiveEnd = Math.min(ev.endYear, end);
        leftPercent = ((effectiveStart - start) / range) * 100;
        const duration = Math.max(effectiveEnd - effectiveStart, 5);
        widthPercent = (duration / range) * 100;
      } else {
        const base = ((ev.year - start) / range) * 100;
        const jitter = localPointIdx * 5; // aire horizontal entre eventos
        leftPercent = base + jitter;
      }

      const el = document.createElement("div");
      el.className = "event" + (ev.type === "movement" ? " event--movement" : "");
      el.style.left = leftPercent + "%";

      if (ev.type === "movement") {
        const vOffset = movementOffsetsY[localMovIdx % movementOffsetsY.length];
        localMovIdx++;
        el.style.top = "calc(30% + " + vOffset + "px)";
        if (widthPercent !== null) {
          el.style.width = Math.max(widthPercent, 10) + "%";
        }
      } else {
        const vOffset = pointOffsetsY[localPointIdx % pointOffsetsY.length];
        localPointIdx++;
        el.style.top = "calc(70% + " + vOffset + "px)";
      }

      const labelYear = ev.type === "movement"
        ? ev.startYear + "–" + ev.endYear
        : ev.year;

      el.textContent = labelYear + " · " + ev.title;

      el.addEventListener("click", () => {
        const tagsHtml = (ev.tags || [])
          .map(t => '<span class="tag">' + t + '</span>')
          .join("");
        detailPanel.innerHTML =
          '<div class="detail-card">' +
            '<h4>' + ev.title + '</h4>' +
            '<p>' + ev.description + '</p>' +
            '<div>' + tagsHtml + '</div>' +
          '</div>';
      });

      layer.appendChild(el);
    });
  });
</script>

</body>
</html>
