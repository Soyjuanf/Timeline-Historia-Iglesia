<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Historia de la Iglesia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Montserrat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --olive: #6b705c;
      --olive-dark: #4a4f3c;
      --terracotta: #b5654d;
      --terracotta-light: #d4a59a;
      --bg: #f8f4f1;
      --text: #2b2b2b;
      --white: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden; /* en móvil lo liberamos */
    }

    header {
      position: fixed;
      top: 0; left: 0; right: 0; height: 80px;
      background: var(--olive);
      color: var(--white);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 24px;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    header span {
      font-size: 12px;
      opacity: 0.8;
    }

    main {
      position: absolute;
      inset: 80px 0 0 0;
      display: grid;
      grid-template-columns: 3fr 1fr;
    }

    .timeline-wrapper {
      overflow-x: auto;
      overflow-y: visible;
      display: flex;
      scroll-snap-type: x mandatory;
      background: #efe9e4;
      -webkit-overflow-scrolling: touch;
    }

    .era {
      position: relative;
      min-width: 220vw; /* aire horizontal en desktop */
      scroll-snap-align: start;
      padding: 32px;
      border-right: 1px solid rgba(0,0,0,0.1);
    }

    .era h2 {
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--terracotta);
      margin-bottom: 4px;
    }

    .era-subtitle {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--olive-dark);
      opacity: 0.8;
    }

    .layers {
      display: grid;
      grid-template-rows: 1fr 1fr; /* Movimientos arriba, eventos abajo */
      position: relative;
      height: 380px; /* alto para eje Y */
      margin-top: 48px;
    }

    .layer {
      position: relative;
      border-top: 1px dashed rgba(0,0,0,0.2);
      padding-left: 260px;
      padding-right: 260px;
    }

    .layer span {
      position: absolute;
      top: -10px;
      left: 260px;
      background: var(--bg);
      padding: 2px 10px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--olive-dark);
    }

    .layer--movements span {
      color: var(--terracotta);
    }

    .layer--events span {
      color: var(--olive-dark);
    }

    .event {
      position: absolute;
      transform: translateX(-50%); /* centrado solo en X */
      background: var(--white);
      border: 2px solid var(--terracotta);
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 11px;
      cursor: pointer;
      white-space: nowrap;
      transition: transform 0.25s, box-shadow 0.25s, border-color 0.25s;
    }

    .event:hover {
      transform: translateX(-50%) scale(1.08);
      box-shadow: 0 10px 24px rgba(0,0,0,0.25);
      border-color: var(--olive-dark);
    }

    .event--movement {
      border-radius: 24px;
      background: rgba(181, 101, 77, 0.14);
      border-style: dashed;
    }

    /* Regla de años */
    .era-scale {
      position: relative;
      height: 40px;
      margin-top: 24px;
      margin-left: 260px;
      margin-right: 260px;
      border-top: 1px solid rgba(0,0,0,0.25);
    }

    .scale-tick {
      position: absolute;
      top: 0;
      transform: translateX(-50%);
      text-align: center;
      font-size: 10px;
      color: var(--olive-dark);
    }

    .scale-tick-line {
      display: block;
      height: 8px;
      border-left: 1px solid rgba(0,0,0,0.6);
      margin-bottom: 2px;
    }

    .scale-tick-label {
      display: block;
    }

    aside {
      background: var(--white);
      padding: 24px;
      border-left: 1px solid rgba(0,0,0,0.1);
      overflow-y: auto;
    }

    aside h3 {
      margin-top: 0;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 14px;
      color: var(--olive);
    }

    .detail-card h4 {
      margin-top: 12px;
      margin-bottom: 8px;
      font-weight: 800;
      color: var(--terracotta);
    }

    .detail-card p {
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .detail-card .tag {
      display: inline-block;
      font-size: 10px;
      border: 1px solid var(--olive);
      padding: 4px 8px;
      border-radius: 999px;
      margin-right: 6px;
      margin-bottom: 6px;
    }

    /* ======== MOBILE ======== */
    @media (max-width: 900px) {
      body {
        overflow: auto;
      }

      header {
        height: 72px;
        padding: 0 16px;
      }

      header h1 {
        font-size: 16px;
        letter-spacing: 0.08em;
      }

      main {
        position: relative;
        inset: 72px 0 0 0;
        display: grid;
        grid-template-columns: 1fr;
      }

      aside {
        height: 40vh;
        padding: 16px;
      }

      .timeline-wrapper {
        height: calc(100vh - 72px - 40vh);
      }

      .era {
        min-width: 260vw;   /* más ancho por era en móvil */
        padding: 24px 16px;
      }

      .layers {
        height: 320px;
        margin-top: 32px;
      }

      .layer {
        padding-left: 80px;
        padding-right: 80px;
      }

      .layer span {
        left: 80px;
        font-size: 9px;
      }

      .era-scale {
        margin-left: 80px;
        margin-right: 80px;
      }

      .event {
        font-size: 10px;
        padding: 6px 12px;
      }

      .detail-card p {
        font-size: 12px;
      }
    }
  </style>
</head>

<body>

<header>
  <h1>HISTORIA DE LA IGLESIA</h1>
  <span>Línea de tiempo interactiva</span>
</header>

<main>
  <div class="timeline-wrapper">

    <!-- ÉFESO -->
    <section class="era" data-start="0" data-end="200">
      <h2>ÉFESO</h2>
      <div class="era-subtitle">Apocalipsis 2:1–7 · Iglesia primitiva</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- ESMIRNA -->
    <section class="era" data-start="200" data-end="300">
      <h2>ESMIRNA</h2>
      <div class="era-subtitle">Apocalipsis 2:8–11 · Iglesia perseguida e imperial</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- PÉRGAMO -->
    <section class="era" data-start="300" data-end="400">
      <h2>PÉRGAMO</h2>
      <div class="era-subtitle">Apocalipsis 2:12–17 · Iglesia imperial y mundanizada</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- TIATIRA -->
    <section class="era" data-start="400" data-end="1000">
      <h2>TIATIRA</h2>
      <div class="era-subtitle">Apocalipsis 2:18–29 · Iglesia medieval</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- SARDIS -->
    <section class="era" data-start="1100" data-end="1400">
      <h2>SARDIS</h2>
      <div class="era-subtitle">Apocalipsis 3:1–6 · Iglesia formal</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- FILADELFIA -->
    <section class="era" data-start="1500" data-end="1800">
      <h2>FILADELFIA</h2>
      <div class="era-subtitle">Apocalipsis 3:7–13 · Iglesia misionera</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

    <!-- LAODICEA -->
    <section class="era" data-start="1900" data-end="2025">
      <h2>LAODICEA</h2>
      <div class="era-subtitle">Apocalipsis 3:14–22 · Iglesia de los últimos días</div>
      <div class="layers">
        <div class="layer layer--movements" data-layer="movements">
          <span>Movimientos</span>
        </div>
        <div class="layer layer--events" data-layer="events">
          <span>Eventos históricos</span>
        </div>
      </div>
    </section>

  </div>

  <aside>
    <h3>DETALLE</h3>
    <div id="detailPanel">
      Haz clic en un evento para ver su información.
    </div>
  </aside>
</main>

<script>
  // =========================
  // DATA: eventos y movimientos
  // =========================
  const events = [
    // =====================
    // ÉFESO (0–200)
    // =====================
    {
      eraIndex: 0,
      type: "point",
      year: 29,
      title: "Ministerio público de Jesús",
      description: "Jesús inicia su predicación del Reino de Dios y llama a sus discípulos.",
      tags: ["Evangelios"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 30,
      title: "Crucifixión y resurrección",
      description: "Jesús es crucificado y resucita al tercer día, fundamento de la fe cristiana.",
      tags: ["Redención"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 43,
      title: "Roma invade Britania",
      description: "El Imperio romano inicia la conquista de la isla de Britania.",
      tags: ["Imperio romano"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 45,
      title: "Cristianos en Antioquía",
      description: "En Antioquía los discípulos reciben por primera vez el nombre de cristianos.",
      tags: ["Identidad cristiana"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 50,
      title: "Viajes misioneros de Pablo",
      description: "Pablo difunde el evangelio por Asia Menor y Europa, fundando iglesias.",
      tags: ["Misión"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 64,
      title: "Persecución de Nerón",
      description: "Nerón culpa a los cristianos del incendio de Roma e inicia una dura persecución.",
      tags: ["Persecución"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 66,
      title: "Primera guerra judío-romana",
      description: "Rebelión de los judíos contra Roma que terminará con la destrucción del Templo.",
      tags: ["Historia judía"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 67,
      title: "Martirio de Pedro",
      description: "El apóstol Pedro es ejecutado en Roma por causa de su fe.",
      tags: ["Martirio"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 70,
      title: "Destrucción de Jerusalén",
      description: "Las legiones romanas destruyen Jerusalén y el Templo.",
      tags: ["Profecía cumplida"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 73,
      title: "Caída de Masada",
      description: "Último bastión judío frente a Roma cae tras un largo asedio.",
      tags: ["Historia judía"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 79,
      title: "Erupción del Vesubio",
      description: "Pompeya y Herculano son destruidas por la erupción del Vesubio.",
      tags: ["Catástrofe"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 80,
      title: "Josefo y la guerra de los judíos",
      description: "Flavio Josefo concluye su obra sobre la guerra judeo-romana.",
      tags: ["Historiografía"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 90,
      title: "Persecución de Domiciano",
      description: "El emperador Domiciano persigue a cristianos que rechazan el culto imperial.",
      tags: ["Persecución"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 100,
      title: "Martirio de Clemente de Roma",
      description: "Uno de los primeros obispos de Roma muere por su fe.",
      tags: ["Padres apostólicos"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 155,
      title: "Justino Mártir contra Marción",
      description: "Justino defiende la fe apostólica frente al dualismo de Marción.",
      tags: ["Apologética"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 170,
      title: "Marco Aurelio y los cristianos",
      description: "Durante su reinado continúan los martirios locales de creyentes.",
      tags: ["Imperio romano"]
    },
    {
      eraIndex: 0,
      type: "point",
      year: 200,
      title: "Apología de Tertuliano",
      description: "Tertuliano escribe en defensa del cristianismo ante las autoridades romanas.",
      tags: ["Apologética"]
    },

    // =====================
    // ESMIRNA (200–300, con eventos que se extienden)
    // =====================

    // Movimientos
    {
      eraIndex: 1,
      type: "movement",
      startYear: 156,
      endYear: 300,
      title: "Montanistas",
      description: "Movimiento profético de Frigia que enfatizaba visiones y vida ascética; considerado herético por la Iglesia oficial.",
      tags: ["Movimiento", "Profecía"]
    },
    {
      eraIndex: 1,
      type: "movement",
      startYear: 251,
      endYear: 400,
      title: "Novacianos",
      description: "Movimiento rigorista que rechazaba la readmisión de cristianos que habían apostatado durante las persecuciones.",
      tags: ["Movimiento", "Rigorismo"]
    },
    {
      eraIndex: 1,
      type: "movement",
      startYear: 311,
      endYear: 500,
      title: "Donatistas",
      description: "Movimiento en el norte de África que condicionaba la validez de los sacramentos a la pureza moral del ministro.",
      tags: ["Movimiento", "África"]
    },
    {
      eraIndex: 1,
      type: "movement",
      startYear: 428,
      endYear: 600,
      title: "Nestorianos",
      description: "Movimiento cristológico asociado a Nestorio; condenado en Éfeso (431), se expande hacia Persia y Asia.",
      tags: ["Movimiento", "Cristología"]
    },

    // Eventos Esmirna
    {
      eraIndex: 1,
      type: "point",
      year: 250,
      title: "Persecución de Decio",
      description: "Primera persecución imperial obligatoria contra todos los cristianos del Imperio.",
      tags: ["Persecución"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 303,
      title: "Gran persecución de Diocleciano",
      description: "Última y más violenta persecución oficial intentando destruir la Iglesia.",
      tags: ["Persecución"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 311,
      title: "Historia Eclesiástica de Eusebio",
      description: "Eusebio de Cesarea escribe la primera gran historia oficial de la Iglesia.",
      tags: ["Historia de la Iglesia"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 312,
      title: "Batalla del Puente Milvio",
      description: "Constantino vence a Majencio bajo el signo cristiano e inicia su apoyo a la fe.",
      tags: ["Constantino", "Imperio"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 313,
      title: "Edicto de Milán",
      description: "Se decreta libertad religiosa para los cristianos en el Imperio romano.",
      tags: ["Iglesia y Estado"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 325,
      title: "Concilio de Nicea",
      description: "Primer concilio ecuménico; se afirma la divinidad de Cristo y se condena el arrianismo.",
      tags: ["Concilios", "Cristología"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 340,
      title: "Cristianismo en Abisinia",
      description: "El cristianismo se establece en el reino de Abisinia (Etiopía).",
      tags: ["Misión", "África"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 361,
      title: "Juliano el Apóstata",
      description: "El emperador intenta restaurar el paganismo y frenar el avance del cristianismo.",
      tags: ["Imperio", "Paganismo"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 370,
      title: "Basilio contra el arrianismo",
      description: "Basilio de Cesarea defiende la doctrina trinitaria frente a los arrianos.",
      tags: ["Padres de la Iglesia"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 380,
      title: "Cristianismo religión oficial",
      description: "El edicto de Tesalónica declara al cristianismo niceno como religión oficial del Imperio.",
      tags: ["Iglesia y Estado"]
    },
    {
      eraIndex: 1,
      type: "point",
      year: 395,
      title: "División del Imperio romano",
      description: "A la muerte de Teodosio I, el Imperio se divide en Oriente y Occidente.",
      tags: ["Imperio romano"]
    },

    // =====================
    // TIATIRA (400–1000)
    // =====================

    // Movimientos (Cátaros, Paulistas, Valdenses, Bogomilos, Lombardos) – representados de forma aproximada
    {
      eraIndex: 3,
      type: "movement",
      startYear: 800,
      endYear: 1000,
      title: "Bogomilos",
      description: "Movimiento ascético y dualista en los Balcanes, crítico del poder eclesiástico.",
      tags: ["Movimiento", "Balcanes"]
    },
    {
      eraIndex: 3,
      type: "movement",
      startYear: 900,
      endYear: 1200,
      title: "Paulicianos tardíos",
      description: "Grupos disidentes de tradición pauliciana que se extienden por Asia Menor y los Balcanes.",
      tags: ["Movimiento"]
    },
    {
      eraIndex: 3,
      type: "movement",
      startYear: 1050,
      endYear: 1300,
      title: "Cátaros (raíces)",
      description: "Corrientes dualistas y disidentes que anticipan movimientos como los albigenses.",
      tags: ["Movimiento", "Europa"]
    },
    {
      eraIndex: 3,
      type: "movement",
      startYear: 900,
      endYear: 1100,
      title: "Lombardos cristianos",
      description: "Pueblos lombardos ya cristianizados que influyen en la configuración religiosa de Italia.",
      tags: ["Movimiento", "Europa"]
    },
    {
      eraIndex: 3,
      type: "movement",
      startYear: 1100,
      endYear: 1400,
      title: "Valdenses (orígenes)",
      description: "Grupos que buscan volver a la sencillez apostólica, precursores de los valdenses posteriores.",
      tags: ["Movimiento", "Remanente"]
    },

    // Eventos Tiatira
    {
      eraIndex: 3,
      type: "point",
      year: 532,
      title: "Construcción de Santa Sofía",
      description: "Justiniano inicia la construcción de la gran basílica de Santa Sofía en Constantinopla.",
      tags: ["Bizancio", "Arquitectura"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 538,
      title: "Papado fortalecido legalmente",
      description: "Las reformas de Justiniano consolidan el papel del obispo de Roma en Occidente.",
      tags: ["Papado"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 568,
      title: "Lombardos invaden Italia",
      description: "Los lombardos se establecen en gran parte de la península itálica.",
      tags: ["Invasiones"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 570,
      title: "Nacimiento de Mahoma",
      description: "Nacimiento del profeta del islam en La Meca.",
      tags: ["Islam"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 600,
      title: "Bautismo infantil generalizado",
      description: "El bautismo de infantes se consolida como práctica normal en la Iglesia occidental.",
      tags: ["Liturgia"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 622,
      title: "Hégira de Mahoma",
      description: "Mahoma huye de La Meca a Medina; inicio del calendario islámico.",
      tags: ["Islam"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 622,
      title: "Impresión de libros en China",
      description: "La impresión mediante bloques de madera se desarrolla y difunde en China.",
      tags: ["Tecnología", "China"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 640,
      title: "Conquista musulmana del Medio Oriente",
      description: "Los ejércitos musulmanes conquistan Siria, Palestina y Egipto.",
      tags: ["Islam", "Conquista"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 643,
      title: "Construcción de la Cúpula de la Roca (inicios)",
      description: "Se proyecta el santuario que será erigido sobre el Monte del Templo en Jerusalén.",
      tags: ["Islam", "Jerusalén"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 711,
      title: "Árabes entran a España",
      description: "Las tropas musulmanas cruzan a la Península Ibérica e inician la conquista de Hispania.",
      tags: ["Islam", "Europa"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 715,
      title: "Evangelios de Lindisfarne",
      description: "Se completa la célebre obra ilustrada insular conocida como los Evangelios de Lindisfarne.",
      tags: ["Arte cristiano", "Escritura"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 725,
      title: "Controversia iconoclasta",
      description: "Surge en Bizancio la controversia sobre el uso de imágenes en el culto.",
      tags: ["Teología", "Imágenes"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 730,
      title: "Beda escribe historia eclesiástica",
      description: "Beda el Venerable escribe la 'Historia eclesiástica del pueblo inglés'.",
      tags: ["Historiografía"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 732,
      title: "Batalla de Tours",
      description: "Carlos Martel detiene el avance musulmán hacia el interior de Europa occidental.",
      tags: ["Europa", "Islam"]
    },
    {
      eraIndex: 3,
      type: "movement",
      startYear: 790,
      endYear: 870,
      title: "Vikingos invaden Europa",
      description: "Oleadas de incursiones vikingas golpean las costas y ríos de Europa.",
      tags: ["Invasiones", "Europa"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 781,
      title: "Nestorianos en China",
      description: "Una estela registra la presencia de cristianos nestorianos refugiados en China.",
      tags: ["Nestorianos", "China"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 787,
      title: "Adoración de santos e imágenes",
      description: "El II Concilio de Nicea afirma la veneración de imágenes y santos en la Iglesia.",
      tags: ["Liturgia", "Concilios"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 796,
      title: "Alcuino revisa la Vulgata",
      description: "Alcuino de York revisa el texto de la Vulgata para Carlomagno.",
      tags: ["Biblia", "Carolingios"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 800,
      title: "Carlomagno emperador",
      description: "Carlomagno es coronado emperador en Roma, símbolo de la cristiandad occidental.",
      tags: ["Imperio", "Papado"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 962,
      title: "Otón I, emperador",
      description: "Otón el Grande es coronado emperador, consolidando el Sacro Imperio Romano Germánico.",
      tags: ["Imperio"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 979,
      title: "China unificada bajo los Song",
      description: "La dinastía Song unifica China y fortalece la cultura y la burocracia imperial.",
      tags: ["China"]
    },
    {
      eraIndex: 3,
      type: "point",
      year: 1000,
      title: "Cumbre de la civilización maya",
      description: "Apogeo de la cultura maya en la península de Yucatán.",
      tags: ["América", "Culturas antiguas"]
    },

    // =====================
    // SARDIS (1100–1400)
    // =====================

    // Movimientos: Albigenses, Jan Hus, Husitas
    {
      eraIndex: 4,
      type: "movement",
      startYear: 1100,
      endYear: 1300,
      title: "Albigenses / Cátaros",
      description: "Movimiento dualista del sur de Francia que denunció la corrupción eclesial.",
      tags: ["Movimiento", "Disidencia"]
    },
    {
      eraIndex: 4,
      type: "movement",
      startYear: 1370,
      endYear: 1415,
      title: "Juan Hus",
      description: "Predicador checo que pidió una reforma profunda de la Iglesia.",
      tags: ["Pre-Reforma"]
    },
    {
      eraIndex: 4,
      type: "movement",
      startYear: 1415,
      endYear: 1450,
      title: "Husitas",
      description: "Movimiento que continúa las enseñanzas de Hus en Bohemia.",
      tags: ["Pre-Reforma"]
    },

    // Eventos Sardis
    {
      eraIndex: 4,
      type: "point",
      year: 1150,
      title: "Universidades de Oxford y París",
      description: "Se consolidan los estudios teológicos y filosóficos en estas universidades.",
      tags: ["Universidades"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1170,
      title: "Asesinato de Tomás Becket",
      description: "El arzobispo de Canterbury es asesinado en la catedral.",
      tags: ["Inglaterra", "Iglesia y Estado"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1096,
      title: "Primera Cruzada",
      description: "Caballeros europeos marchan hacia Tierra Santa; se toma Jerusalén en 1099.",
      tags: ["Cruzadas"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1147,
      title: "Segunda Cruzada",
      description: "Cruzada convocada tras la caída de Edesa; fracasa en sus objetivos.",
      tags: ["Cruzadas"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1189,
      title: "Tercera Cruzada",
      description: "Cruzada de reyes frente a Saladino.",
      tags: ["Cruzadas"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1202,
      title: "Cuarta Cruzada",
      description: "La cruzada termina saqueando Constantinopla en 1204.",
      tags: ["Cruzadas"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1215,
      title: "Magna Carta",
      description: "La nobleza inglesa limita el poder del rey Juan Sin Tierra.",
      tags: ["Derecho", "Política"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1215,
      title: "Transubstanciación definida",
      description: "El IV Concilio de Letrán define la doctrina de la transubstanciación.",
      tags: ["Dogma", "Eucaristía"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1265,
      title: "Tomás de Aquino: Suma Teológica",
      description: "Tomás de Aquino compone su gran síntesis teológica y filosófica.",
      tags: ["Teología", "Escolástica"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1266,
      title: "Nacimiento de Giotto",
      description: "Nace Giotto di Bondone, pionero del arte renacentista.",
      tags: ["Arte", "Renacimiento"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1300,
      title: "Comunión de infantes",
      description: "Se generaliza la práctica litúrgica de la comunión a los niños en la Iglesia medieval.",
      tags: ["Liturgia"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1384,
      title: "Biblia de Wycliffe",
      description: "Primera traducción completa de la Biblia al inglés medio.",
      tags: ["Biblia", "Pre-Reforma"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1415,
      title: "Martirio de Juan Hus",
      description: "Hus es quemado en la hoguera en Constanza por sus enseñanzas reformistas.",
      tags: ["Pre-Reforma"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1418,
      title: "Tomás de Kempis: Imitación de Cristo",
      description: "Se difunde esta obra devocional clásica de la espiritualidad cristiana.",
      tags: ["Devocionalidad"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1440,
      title: "Imprenta de Gutenberg",
      description: "Johannes Gutenberg introduce la imprenta de tipos móviles en Europa.",
      tags: ["Imprenta", "Tecnología"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1453,
      title: "Turcos conquistan Constantinopla",
      description: "Caída de Constantinopla en manos del Imperio otomano.",
      tags: ["Bizancio", "Islam"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1478,
      title: "Inquisición española",
      description: "Se establece formalmente la Inquisición en España.",
      tags: ["Inquisición"]
    },
    {
      eraIndex: 4,
      type: "point",
      year: 1494,
      title: "Savonarola contra la inmoralidad papal",
      description: "Savonarola denuncia la corrupción en Florencia y en la curia romana.",
      tags: ["Reforma moral"]
    },

    // =====================
    // FILADELFIA (1500–1800)
    // =====================

    // Movimientos
    {
      eraIndex: 5,
      type: "movement",
      startYear: 1525,
      endYear: 1700,
      title: "Anabautistas y menonitas",
      description: "Grupos que enfatizan el bautismo de creyentes y la vida comunitaria separada del mundo.",
      tags: ["Reforma radical"]
    },
    {
      eraIndex: 5,
      type: "movement",
      startYear: 1600,
      endYear: 1900,
      title: "Bautistas",
      description: "Movimiento que subraya el bautismo de creyentes y la autonomía de la iglesia local.",
      tags: ["Denominación"]
    },
    {
      eraIndex: 5,
      type: "movement",
      startYear: 1675,
      endYear: 1800,
      title: "Pietismo",
      description: "Reacción espiritual dentro del luteranismo que enfatiza la piedad personal y el nuevo nacimiento.",
      tags: ["Renovación"]
    },
    {
      eraIndex: 5,
      type: "movement",
      startYear: 1517,
      endYear: 1564,
      title: "Reforma: Lutero, Zwinglio, Calvino",
      description: "Centro de la Reforma protestante: doctrina de la justificación por la fe y retorno a la Escritura.",
      tags: ["Reforma"]
    },
    {
      eraIndex: 5,
      type: "movement",
      startYear: 1700,
      endYear: 1900,
      title: "Gran movimiento misionero",
      description: "Misioneros como Edwards, los Wesley, Brainerd, Whitefield, Carey, Judson, Newton, Müller, Hudson Taylor, Moody, Spurgeon, Paton y Livingstone llevan el evangelio a todo el mundo.",
      tags: ["Misiones"]
    },

    // Eventos Filadelfia
    {
      eraIndex: 5,
      type: "point",
      year: 1516,
      title: "Nuevo Testamento de Erasmo",
      description: "Erasmo publica su edición crítica del Nuevo Testamento griego.",
      tags: ["Biblia", "Humanismo"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1530,
      title: "Iglesia luterana",
      description: "La Confesión de Augsburgo consolida la identidad de las iglesias luteranas.",
      tags: ["Luteranismo"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1541,
      title: "Iglesia congregacionalista",
      description: "Se afianza en Suiza e Inglaterra el modelo de iglesia autónoma congregacional.",
      tags: ["Congregacionalismo"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1569,
      title: "Biblia del Oso",
      description: "Primera traducción completa de la Biblia al castellano, por Casiodoro de Reina.",
      tags: ["Biblia", "Español"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1572,
      title: "Masacre de San Bartolomé",
      description: "Matanza de hugonotes en Francia en la noche de San Bartolomé.",
      tags: ["Guerras de religión"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1588,
      title: "Derrota de la Armada Española",
      description: "La flota de Felipe II es derrotada por Inglaterra; giro en el poder marítimo.",
      tags: ["Europa", "Poder naval"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1603,
      title: "Iglesia presbiteriana",
      description: "Se consolida el sistema presbiteriano de gobierno eclesiástico en Escocia.",
      tags: ["Presbiterianismo"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1629,
      title: "Descartes y el racionalismo",
      description: "René Descartes sienta las bases del racionalismo moderno.",
      tags: ["Filosofía", "Modernidad"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1665,
      title: "Newton y la gravedad",
      description: "Isaac Newton realiza experimentos que desembocan en la ley de la gravitación universal.",
      tags: ["Ciencia"]
    },
    {
      eraIndex: 5,
      type: "point",
      year: 1859,
      title: "Origen de las especies",
      description: "Charles Darwin publica 'On the Origin of Species', introduciendo la teoría de la evolución por selección natural.",
      tags: ["Ciencia", "Debate fe-ciencia"]
    },

    // =====================
    // LAODICEA (1900–2025)
    // =====================

    {
      eraIndex: 6,
      type: "movement",
      startYear: 1900,
      endYear: 2025,
      title: "Evangelismo y misiones modernas",
      description: "Siglo XX y XXI marcados por cruzadas evangelísticas y expansión misionera global.",
      tags: ["Misiones", "Siglo XX"]
    },
    {
      eraIndex: 6,
      type: "movement",
      startYear: 1900,
      endYear: 2000,
      title: "Predicadores influyentes",
      description: "Dios usa a predicadores y testigos como Martyn Lloyd-Jones, Billy Sunday, Billy Graham y Corrie ten Boom para impactar el siglo XX.",
      tags: ["Predicación", "Testimonio"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1914,
      title: "Primera Guerra Mundial",
      description: "Conflicto global que transforma el mapa político de Europa.",
      tags: ["Historia mundial"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1939,
      title: "Segunda Guerra Mundial",
      description: "Guerra mundial de 1939–1945 con profundas consecuencias geopolíticas.",
      tags: ["Historia mundial"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1948,
      title: "Fundación del Estado de Israel",
      description: "Se declara el Estado de Israel en la antigua Palestina bajo mandato británico.",
      tags: ["Israel", "Siglo XX"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1950,
      title: "Clifford Clark en Tulsa Baptist Temple",
      description: "Clifford Clark sirve como pastor en Tulsa Baptist Temple, influyendo en misiones y formación de obreros.",
      tags: ["Misiones", "EE. UU."]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1956,
      title: "Misioneros a los indios Aucas",
      description: "Cinco misioneros son martirizados al llevar el evangelio al pueblo waorani en Ecuador.",
      tags: ["Misiones", "Martirio"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1967,
      title: "Richard Wurmbrand: Tortured for Christ",
      description: "El testimonio de Wurmbrand sobre la persecución en Rumanía sacude al mundo occidental.",
      tags: ["Persecución", "Cortina de hierro"]
    },
    {
      eraIndex: 6,
      type: "point",
      year: 1982,
      title: "Pablo Clark en Colombia",
      description: "Pablo Clark llega a Colombia para establecer iglesias del movimiento 'La Biblia Dice...'.",
      tags: ["Misiones", "Colombia"]
    }
  ];

  const eras = document.querySelectorAll(".era");
  const detailPanel = document.getElementById("detailPanel");

  // 1. Agrupar eventos por era + tipo (movements / events)
  const groups = {};
  events.forEach(ev => {
    const eraIndex = ev.eraIndex;
    const layerKey = ev.type === "movement" ? "movements" : "events";
    const key = `${eraIndex}-${layerKey}`;
    if (!groups[key]) groups[key] = [];
    groups[key].push(ev);
  });

  // 2. Para cada grupo, ordenamos por año y repartimos verticalmente
  Object.keys(groups).forEach(key => {
    const [eraIndexStr, layerKey] = key.split("-");
    const eraIndex = parseInt(eraIndexStr, 10);
    const era = eras[eraIndex];
    if (!era) return;

    const layer = era.querySelector(`.layer[data-layer="${layerKey}"]`);
    if (!layer) return;

    const start = parseInt(era.dataset.start, 10);
    const end = parseInt(era.dataset.end, 10);
    const range = end - start;

    const list = groups[key];

    // orden cronológico
    list.sort((a, b) => {
      const ay = a.type === "movement" ? a.startYear : a.year;
      const by = b.type === "movement" ? b.startYear : b.year;
      return ay - by;
    });

    const total = list.length;

    list.forEach((event, idx) => {
      // posición vertical: repartimos entre 10% y 90% del alto de la capa
      const rowFraction = (idx + 1) / (total + 1);
      const topPercent = 10 + rowFraction * 80;

      // posición horizontal según año
      let leftPercent;
      let widthPercent = null;

      if (event.type === "movement") {
        const effectiveStart = Math.max(event.startYear, start);
        const effectiveEnd = Math.min(event.endYear, end);
        const duration = Math.max(effectiveEnd - effectiveStart, 5);
        leftPercent = ((effectiveStart - start) / range) * 100;
        widthPercent = (duration / range) * 100;
      } else {
        const yearClamped = Math.min(Math.max(event.year, start), end);
        leftPercent = ((yearClamped - start) / range) * 100;
      }

      const el = document.createElement("div");
      el.className = "event" + (event.type === "movement" ? " event--movement" : "");
      el.style.left = leftPercent + "%";
      el.style.top = topPercent + "%";

      if (event.type === "movement" && widthPercent !== null) {
        el.style.width = Math.max(widthPercent, 8) + "%";
      }

      const labelYear = event.type === "movement"
        ? `${event.startYear}–${event.endYear}`
        : event.year;

      el.textContent = `${labelYear} · ${event.title}`;

      el.addEventListener("click", () => {
        const tagsHtml = (event.tags || [])
          .map(t => `<span class="tag">${t}</span>`)
          .join("");
        detailPanel.innerHTML = `
          <div class="detail-card">
            <h4>${event.title}</h4>
            <p>${event.description}</p>
            <div>${tagsHtml}</div>
          </div>
        `;
      });

      layer.appendChild(el);
    });
  });

  // 3. Regla de años para cada era
  eras.forEach(era => {
    const start = parseInt(era.dataset.start, 10);
    const end = parseInt(era.dataset.end, 10);
    const range = end - start;

    const scale = document.createElement("div");
    scale.className = "era-scale";

    const step = 50;
    let firstTick = Math.ceil(start / step) * step;
    if (start === 0) firstTick = 0;

    for (let y = firstTick; y <= end; y += step) {
      const percent = ((y - start) / range) * 100;

      const tick = document.createElement("div");
      tick.className = "scale-tick";
      tick.style.left = percent + "%";

      tick.innerHTML = `
        <span class="scale-tick-line"></span>
        <span class="scale-tick-label">${y}</span>
      `;

      scale.appendChild(tick);
    }

    era.appendChild(scale);
  });
</script>

</body>
</html>
