<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Historia de la Iglesia – Línea de tiempo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Montserrat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --olive: #6b705c;
      --olive-dark: #4a4f3c;
      --terracotta: #b5654d;
      --terracotta-soft: rgba(181, 101, 77, 0.16);
      --bg: #f8f4f1;
      --text: #2b2b2b;
      --white: #ffffff;
      --border-soft: rgba(0,0,0,0.12);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }

    header {
      position: fixed;
      top: 0; left: 0; right: 0; height: 80px;
      background: var(--olive);
      color: var(--white);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 24px;
      z-index: 20;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    header span {
      font-size: 12px;
      opacity: 0.85;
    }

    main {
      position: relative;
      padding-top: 80px;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(280px, 1fr);
      min-height: calc(100vh - 80px);
    }

    /* TIMELINE LADO IZQUIERDO */

    .timeline-wrapper {
      overflow-x: auto;
      overflow-y: hidden;
      background: #efe9e4;
      border-right: 1px solid var(--border-soft);
    }

    .timeline-inner {
      display: flex;
      min-height: 100%;
    }

    .era {
      min-width: 1300px; /* mucho aire horizontal por era */
      padding: 32px 40px 40px;
      border-right: 1px solid var(--border-soft);
      scroll-snap-align: start;
    }

    .era-title {
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--terracotta);
      margin: 0 0 4px;
      font-size: 16px;
    }

    .era-subtitle {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--olive-dark);
      opacity: 0.85;
    }

    .era-track {
      position: relative;
      margin-top: 40px;
      /* este contenedor define el “mundo” horizontal de eventos y regla */
      width: 100%;
    }

    .band-label {
      position: absolute;
      left: 0;
      transform: translateY(-50%);
      padding: 2px 10px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--olive-dark);
      background: var(--bg);
      z-index: 2;
    }

    .band {
      position: relative;
      width: 100%;
      margin-bottom: 40px;
      padding-top: 22px;
    }

    .band-line {
      position: absolute;
      top: 50%;
      left: 0; right: 0;
      border-top: 1px dashed var(--border-soft);
      z-index: 0;
    }

    .band-content {
      position: relative;
      width: 100%;
      height: 180px; /* eje Y amplio para varias filas */
    }

    /* Regla inferior */
    .era-scale {
      position: relative;
      margin-top: 24px;
      padding-top: 16px;
    }

    .era-scale-line {
      position: relative;
      height: 1px;
      background: var(--border-soft);
    }

    .era-scale-track {
      position: absolute;
      left: 0; right: 0;
      top: -4px;
      height: 30px;
      pointer-events: none;
    }

    .tick {
      position: absolute;
      top: 0;
      width: 1px;
      height: 8px;
      background: var(--border-soft);
    }

    .tick-label {
      position: absolute;
      top: 10px;
      font-size: 10px;
      transform: translateX(-50%);
      color: var(--olive-dark);
    }

    /* EVENTOS */

    .event {
      position: absolute;
      top: 0;
      /* muy importante: solo centramos en Y; en X el inicio marca el año */
      transform: translateY(-50%);
      background: var(--white);
      border: 2px solid var(--terracotta);
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 11px;
      white-space: nowrap;
      cursor: pointer;
      box-shadow: 0 0 0 rgba(0,0,0,0);
      transition: box-shadow 0.25s ease, transform 0.25s ease, border-color 0.25s ease;
      max-width: none;
      overflow: visible;
    }

    .event:hover {
      transform: translateY(-50%) scale(1.04);
      box-shadow: 0 10px 24px rgba(0,0,0,0.20);
      border-color: var(--olive-dark);
      z-index: 5;
    }

    .event--movement {
      background: var(--terracotta-soft);
      border-style: dashed;
      border-radius: 24px;
      height: 32px;
      line-height: 32px;
      padding-top: 0;
      padding-bottom: 0;
    }

    .event--movement .event-label {
      position: relative;
      top: -1px;
    }

    .event-label {
      display: inline-block;
      vertical-align: middle;
    }

    /* PANEL DERECHO */

    aside {
      padding: 24px;
      background: var(--white);
    }

    aside h3 {
      margin: 0 0 12px;
      font-weight: 800;
      font-size: 14px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--olive);
    }

    .detail-card h4 {
      margin: 12px 0 4px;
      font-size: 15px;
      font-weight: 800;
      color: var(--terracotta);
    }

    .detail-card .detail-year {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--olive-dark);
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .detail-card p {
      font-size: 13px;
      line-height: 1.6;
      margin: 0 0 10px;
    }

    .detail-card .tag {
      display: inline-block;
      font-size: 10px;
      border: 1px solid var(--olive);
      padding: 4px 8px;
      border-radius: 999px;
      margin-right: 6px;
      margin-bottom: 6px;
    }

    .detail-empty {
      font-size: 13px;
      color: var(--olive-dark);
      opacity: 0.9;
      line-height: 1.6;
    }

    /* RESPONSIVE */

    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }

      .timeline-wrapper {
        height: calc(100vh - 80px - 220px);
      }

      aside {
        border-top: 1px solid var(--border-soft);
        height: 220px;
        overflow-y: auto;
      }

      .era {
        min-width: 900px;
        padding: 24px 20px 40px;
      }
    }
  </style>
</head>

<body>
<header>
  <h1>HISTORIA DE LA IGLESIA</h1>
  <span>Línea de tiempo interactiva</span>
</header>

<main>
  <div class="timeline-wrapper">
    <div class="timeline-inner" id="timeline"></div>
  </div>

  <aside>
    <h3>DETALLE</h3>
    <div id="detailPanel" class="detail-empty">
      Haz clic en un evento o movimiento para ver su información.
    </div>
  </aside>
</main>

<script>
  /* ==== CONFIGURACIÓN DE ERAS ==================================== */

  const eras = [
    {
      id: "efeso",
      title: "ÉFESO",
      subtitle: "Apocalipsis 2:1–7 · Iglesia primitiva",
      start: 0,
      end: 200
    },
    {
      id: "esmirna",
      title: "ESMIRNA",
      subtitle: "Apocalipsis 2:8–11 · Iglesia perseguida e imperial",
      start: 200,
      end: 400
    },
    {
      id: "pergamo",
      title: "PÉRGAMO",
      subtitle: "Apocalipsis 2:12–17 · Iglesia imperial y mundanizada",
      start: 400,
      end: 500
    },
    {
      id: "tiatira",
      title: "TIATIRA",
      subtitle: "Apocalipsis 2:18–29 · Iglesia medieval",
      start: 500,
      end: 1100
    },
    {
      id: "sardis",
      title: "SARDIS",
      subtitle: "Apocalipsis 3:1–6 · Iglesia reformada",
      start: 1100,
      end: 1500
    },
    {
      id: "filadelfia",
      title: "FILADELFIA",
      subtitle: "Apocalipsis 3:7–13 · Iglesia misionera",
      start: 1500,
      end: 1900
    },
    {
      id: "laodicea",
      title: "LAODICEA",
      subtitle: "Apocalipsis 3:14–22 · Iglesia contemporánea",
      start: 1900,
      end: 2025
    }
  ];

  /* ==== DATOS DE EVENTOS Y MOVIMIENTOS =========================== */
  /* type: 'event' (puntual) o 'movement' (larga duración) */

  const items = [
    /* --- ÉFESO: eventos puntuales --- */
    { era: "efeso", type: "event", year: 29,
      title: "Ministerio público de Jesús",
      description: "Jesús anuncia el Reino de Dios, escoge a los doce y establece las bases de la Iglesia.",
      tags: ["Evangelios"] },

    { era: "efeso", type: "event", year: 30,
      title: "Crucifixión y resurrección",
      description: "Muerte y resurrección de Jesús en Jerusalén; fundamento de la fe cristiana.",
      tags: ["Redención"] },

    { era: "efeso", type: "event", year: 43,
      title: "Roma invade Bretaña",
      description: "El Imperio romano inicia la conquista de la isla de Bretaña.",
      tags: ["Imperio romano"] },

    { era: "efeso", type: "event", year: 45,
      title: "Se les llama cristianos en Antioquía",
      description: "Por primera vez los discípulos reciben el nombre de cristianos.",
      tags: ["Identidad cristiana", "Hechos 11"] },

    { era: "efeso", type: "event", year: 50,
      title: "Viajes misioneros de Pablo",
      description: "Pablo recorre Asia Menor y Europa anunciando el evangelio y plantando iglesias.",
      tags: ["Misión", "Hechos"] },

    { era: "efeso", type: "event", year: 64,
      title: "Persecución de Nerón",
      description: "Tras el incendio de Roma, Nerón culpa a los cristianos y desata una dura persecución.",
      tags: ["Persecución"] },

    { era: "efeso", type: "event", year: 66,
      title: "Primera guerra judío-romana",
      description: "Levantamiento judío contra Roma que terminará con la destrucción de Jerusalén.",
      tags: ["Historia judía"] },

    { era: "efeso", type: "event", year: 67,
      title: "Martirio del apóstol Pedro",
      description: "Tradicionalmente se ubica el martirio de Pedro en Roma durante el reinado de Nerón.",
      tags: ["Martirio"] },

    { era: "efeso", type: "event", year: 70,
      title: "Destrucción de Jerusalén",
      description: "Las legiones romanas arrasan Jerusalén y destruyen el templo.",
      tags: ["Profecía cumplida"] },

    { era: "efeso", type: "event", year: 73,
      title: "Caída de Masada",
      description: "Último bastión de la resistencia judía frente a Roma.",
      tags: ["Historia judía"] },

    { era: "efeso", type: "event", year: 79,
      title: "Erupción del Vesubio",
      description: "Pompeya y Herculano quedan sepultadas por la erupción del Vesubio.",
      tags: ["Catástrofes"] },

    { era: "efeso", type: "event", year: 80,
      title: "Josefo escribe 'La guerra de los judíos'",
      description: "Flavio Josefo relata la guerra entre Roma y Judea, fuente clave para este período.",
      tags: ["Fuentes históricas"] },

    { era: "efeso", type: "event", year: 90,
      title: "Persecución de Domiciano",
      description: "Domiciano exige culto imperial y persigue a quienes se niegan, entre ellos los cristianos.",
      tags: ["Persecución"] },

    { era: "efeso", type: "event", year: 100,
      title: "Martirio de Clemente de Roma",
      description: "Clemente, uno de los primeros obispos de Roma, muere por su fe.",
      tags: ["Padres apostólicos"] },

    { era: "efeso", type: "event", year: 155,
      title: "Justino Mártir enfrenta la herejía",
      description: "Justino defiende la fe apostólica frente a los errores de Marción y otros grupos.",
      tags: ["Apologética"] },

    { era: "efeso", type: "event", year: 170,
      title: "Marco Aurelio y los cristianos",
      description: "Durante su reinado se registran diversos martirios y tensiones con las comunidades cristianas.",
      tags: ["Imperio romano"] },

    { era: "efeso", type: "event", year: 200,
      title: "Apología de Tertuliano",
      description: "Tertuliano escribe en defensa de la fe cristiana frente al paganismo y las acusaciones romanas.",
      tags: ["Apologética"] },

    /* --- ESMIRNA: movimientos de larga duración --- */

    { era: "esmirna", type: "movement", startYear: 156, endYear: 300,
      title: "Montanistas",
      description: "Movimiento profético que enfatizaba visiones y rigor moral; considerado herético por la Iglesia.",
      tags: ["Movimiento", "Profecía"] },

    { era: "esmirna", type: "movement", startYear: 251, endYear: 400,
      title: "Novacianos",
      description: "Movimiento que rechazaba readmitir a quienes habían apostatado en persecuciones.",
      tags: ["Movimiento", "Rigorismo"] },

    { era: "esmirna", type: "movement", startYear: 311, endYear: 500,
      title: "Donatistas",
      description: "En el norte de África defendían que los sacramentos dependían de la pureza moral del ministro.",
      tags: ["Movimiento", "África"] },

    { era: "esmirna", type: "movement", startYear: 428, endYear: 600,
      title: "Nestorianos",
      description: "Corriente cristológica asociada a Nestorio, extendida luego hacia Persia y Asia.",
      tags: ["Movimiento", "Cristología"] },

    /* --- ESMIRNA: eventos puntuales --- */

    { era: "esmirna", type: "event", year: 303,
      title: "Gran persecución de Diocleciano",
      description: "Última y más dura persecución oficial del Imperio contra los cristianos.",
      tags: ["Persecución"] },

    { era: "esmirna", type: "event", year: 311,
      title: "Historia eclesiástica de Eusebio",
      description: "Eusebio de Cesarea redacta la primera gran historia de la Iglesia.",
      tags: ["Historia de la Iglesia"] },

    { era: "esmirna", type: "event", year: 312,
      title: "Constantino gana el Puente Milvio",
      description: "Constantino vence a Majencio bajo el signo del cristianismo.",
      tags: ["Constantino", "Imperio"] },

    { era: "esmirna", type: "event", year: 313,
      title: "Edicto de Milán",
      description: "Se concede libertad religiosa y se legaliza el cristianismo en el Imperio.",
      tags: ["Iglesia y Estado"] },

    { era: "esmirna", type: "event", year: 325,
      title: "Concilio de Nicea",
      description: "Primer concilio ecuménico: se afirma la divinidad de Cristo y se condena el arrianismo.",
      tags: ["Concilios"] },

    { era: "esmirna", type: "event", year: 340,
      title: "Cristianismo en Abisinia",
      description: "El evangelio llega y se establece en el reino de Abisinia (Etiopía).",
      tags: ["Misión", "África"] },

    { era: "esmirna", type: "event", year: 361,
      title: "Juliano el Apóstata",
      description: "Emperador que intenta restaurar el paganismo y frenar el avance cristiano.",
      tags: ["Imperio"] },

    { era: "esmirna", type: "event", year: 370,
      title: "Basilio contra el arrianismo",
      description: "Basilio de Cesarea defiende la doctrina trinitaria frente a los arrianos.",
      tags: ["Padres capadocios"] },

    { era: "esmirna", type: "event", year: 380,
      title: "Cristianismo religión oficial",
      description: "El edicto de Tesalónica proclama el cristianismo niceno como religión oficial del Imperio.",
      tags: ["Iglesia y Estado"] },

    { era: "esmirna", type: "event", year: 395,
      title: "División del Imperio romano",
      description: "A la muerte de Teodosio I, el Imperio se divide en Oriente y Occidente.",
      tags: ["Imperio romano"] },

    { era: "esmirna", type: "event", year: 396,
      title: "Agustín obispo de Hipona",
      description: "Agustín asume el episcopado en Hipona; su obra marcará la teología occidental.",
      tags: ["Teología"] },

    { era: "esmirna", type: "event", year: 405,
      title: "Jerónimo completa la Vulgata",
      description: "Se concluye la traducción latina de la Biblia que será texto de referencia en Occidente.",
      tags: ["Biblia"] },

    { era: "esmirna", type: "event", year: 431,
      title: "Se afianza el culto mariano",
      description: "El Concilio de Éfeso proclama a María como Theotokos.",
      tags: ["Mariología"] },

    { era: "esmirna", type: "event", year: 436,
      title: "Tropas romanas dejan Britania",
      description: "Roma retira sus legiones de Britania, dejando la isla a su suerte.",
      tags: ["Fin del Imperio"] },

    { era: "esmirna", type: "event", year: 443,
      title: "Pueblos germánicos en Alsacia",
      description: "Tribus germánicas se establecen de forma permanente dentro de territorio romano.",
      tags: ["Invasiones bárbaras"] },

    { era: "esmirna", type: "event", year: 450,
      title: "León I y la autoridad papal",
      description: "El papa León I actúa como voz espiritual y política en Occidente.",
      tags: ["Papado"] },

    { era: "esmirna", type: "event", year: 452,
      title: "Atila el Huno en Italia",
      description: "Atila amenaza Roma; León I negocia para detener su avance.",
      tags: ["Invasiones bárbaras"] },

    { era: "esmirna", type: "event", year: 455,
      title: "Saqueo de Roma por los vándalos",
      description: "La ciudad de Roma es saqueada por segunda vez en pocas décadas.",
      tags: ["Invasiones bárbaras"] },

    { era: "esmirna", type: "event", year: 470,
      title: "Esplendor maya clásico",
      description: "Auge de la civilización maya en Mesoamérica.",
      tags: ["Culturas antiguas"] },

    { era: "esmirna", type: "event", year: 476,
      title: "Caída del Imperio romano de Occidente",
      description: "Depósito de Rómulo Augústulo; marca el fin tradicional de la antigüedad occidental.",
      tags: ["Caída de Roma"] },

    { era: "esmirna", type: "event", year: 478,
      title: "Primer templo sintoísta en Japón",
      description: "Se consolidan los cultos propios del sintoísmo.",
      tags: ["Religiones del mundo"] },

    /* --- resto de eras: solo algunos ejemplos para mostrar que funciona --- */

    { era: "tiatira", type: "movement", startYear: 790, endYear: 870,
      title: "Vikingos invaden Europa",
      description: "Oleadas de invasiones y asentamientos vikingos en el norte de Europa.",
      tags: ["Europa medieval"] },

    { era: "sardis", type: "movement", startYear: 1100, endYear: 1300,
      title: "Albigenses / Cátaros",
      description: "Movimiento dualista en el sur de Francia fuertemente perseguido.",
      tags: ["Herejías medievales"] },

    { era: "filadelfia", type: "movement", startYear: 1517, endYear: 1564,
      title: "Reforma: Lutero, Zwinglio, Calvino",
      description: "Reforma protestante en Alemania, Suiza y Ginebra.",
      tags: ["Reforma"] },

    { era: "filadelfia", type: "event", year: 1516,
      title: "Nuevo Testamento de Erasmo",
      description: "Edición crítica en griego que influye fuertemente en los reformadores.",
      tags: ["Textos bíblicos"] },

    { era: "laodicea", type: "event", year: 1948,
      title: "Fundación del Estado de Israel",
      description: "Se establece el moderno Estado de Israel tras la Segunda Guerra Mundial.",
      tags: ["Historia contemporánea"] }
  ];

  /* ==== RENDER ==================================================== */

  const timelineEl = document.getElementById('timeline');
  const detailPanel = document.getElementById('detailPanel');

  function createEraSection(era) {
    const section = document.createElement('section');
    section.className = 'era';
    section.dataset.start = era.start;
    section.dataset.end = era.end;
    section.id = `era-${era.id}`;

    section.innerHTML = `
      <h2 class="era-title">${era.title}</h2>
      <div class="era-subtitle">${era.subtitle}</div>
      <div class="era-track">
        <div class="band band--movements">
          <span class="band-label">Movimientos</span>
          <div class="band-line"></div>
          <div class="band-content" data-band="movements"></div>
        </div>

        <div class="band band--events">
          <span class="band-label" style="top: 50%; transform: translateY(-50%);">Eventos históricos</span>
          <div class="band-line"></div>
          <div class="band-content" data-band="events"></div>
        </div>

        <div class="era-scale">
          <div class="era-scale-line"></div>
          <div class="era-scale-track"></div>
        </div>
      </div>
    `;

    return section;
  }

  // Añadimos las secciones de eras
  eras.forEach(era => {
    timelineEl.appendChild(createEraSection(era));
  });

  // Agrupar items por era y tipo
  const itemsByEra = {};
  items.forEach(it => {
    if (!itemsByEra[it.era]) itemsByEra[it.era] = [];
    itemsByEra[it.era].push(it);
  });

  function placeItemsInBand(bandEl, list, eraStart, eraEnd, isMovement) {
    const bandContent = bandEl.querySelector('.band-content');
    if (!list || list.length === 0) return;

    const range = eraEnd - eraStart;
    const rows = isMovement ? 4 : 6;
    const rowHeight = 30;
    const topBase = 50; // centro de la banda

    const lastPos = new Array(rows).fill(-Infinity);

    // Orden cronológico por inicio
    list.sort((a, b) => {
      const aYear = isMovement ? a.startYear : a.year;
      const bYear = isMovement ? b.startYear : b.year;
      return aYear - bYear;
    });

    list.forEach(ev => {
      const year = isMovement ? ev.startYear : ev.year;
      const clampedYear = Math.min(Math.max(year, eraStart), eraEnd);
      const xPercent = ((clampedYear - eraStart) / range) * 100;

      // Elegir fila libre (para no pisarse horizontalmente)
      const MIN_GAP = 8; // 8% de separación mínima en la misma fila
      let chosenRow = 0;
      for (let r = 0; r < rows; r++) {
        if (xPercent - lastPos[r] > MIN_GAP) {
          chosenRow = r;
          break;
        }
      }
      lastPos[chosenRow] = xPercent;

      const y = topBase + (chosenRow - (rows / 2)) * rowHeight;

      const el = document.createElement('div');
      el.className = 'event' + (isMovement ? ' event--movement' : '');
      const labelYear = isMovement ? `${ev.startYear}–${ev.endYear}` : ev.year;
      el.innerHTML = `<span class="event-label">${labelYear} · ${ev.title}</span>`;
      el.style.left = xPercent + '%';
      el.style.top = y + 'px';

      el.addEventListener('click', () => {
        const tagsHtml = (ev.tags || []).map(t => `<span class="tag">${t}</span>`).join('');
        detailPanel.innerHTML = `
          <div class="detail-card">
            <h4>${ev.title}</h4>
            <div class="detail-year">${isMovement ? `${ev.startYear}–${ev.endYear}` : ev.year}</div>
            <p>${ev.description || ''}</p>
            <div>${tagsHtml}</div>
          </div>
        `;
      });

      bandContent.appendChild(el);
    });
  }

  // Colocar eventos y movimientos en cada era, y dibujar la regla
  eras.forEach(era => {
    const section = document.getElementById(`era-${era.id}`);
    const eraStart = era.start;
    const eraEnd = era.end;

    const all = itemsByEra[era.id] || [];
    const movements = all.filter(i => i.type === 'movement');
    const eventsList = all.filter(i => i.type === 'event');

    const movementBand = section.querySelector('.band--movements');
    const eventBand = section.querySelector('.band--events');

    placeItemsInBand(movementBand, movements, eraStart, eraEnd, true);
    placeItemsInBand(eventBand, eventsList, eraStart, eraEnd, false);

    // Regla
    const scaleTrack = section.querySelector('.era-scale-track');
    const step = 50;
    for (let y = eraStart; y <= eraEnd; y += step) {
      const xPercent = ((y - eraStart) / (eraEnd - eraStart)) * 100;

      const tick = document.createElement('div');
      tick.className = 'tick';
      tick.style.left = xPercent + '%';

      const label = document.createElement('div');
      label.className = 'tick-label';
      label.style.left = xPercent + '%';
      label.textContent = y;

      scaleTrack.appendChild(tick);
      scaleTrack.appendChild(label);
    }
  });
</script>

</body>
</html>
